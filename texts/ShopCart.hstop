TField "ShopCart.hstop" "<h1></h1><h3 class=\"post-title entry-title\" itemprop=\"name\" style=\"margin: 0.75em 0px 0px; position: relative; font-weight: normal; font-size: 22px; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);\">A persistent and stateful flow: A shooping cart</h3><span style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\"><br>In the example below, the shopping cart is stored as session data. In the ask statement that show the shopping cart,</span><em style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\">getSessionData</em><span style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\">&nbsp;is used in the View monad (in bold), so when backtracking&nbsp;&nbsp;the code will get the last shopping cart, so no roll-back effect will appear and the back button can be used for navigation purposes.&nbsp; Here is a&nbsp; loop with an alternance between buying from the catalog and showing the shopping cart. The loop, and the navigation can be executed forward, by pressing the links, and backward, by means of the back button. The result is the same.</span><br style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\"><br style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\"><span style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\">If&nbsp;</span><em style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\">getSessionData</em><span style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\">&nbsp;is not in the&nbsp;View monad,&nbsp;and the cart variable in scope&nbsp;is used, then this variable will keep its value that it had at each moment of the loop, so when going back we will see fewer and fewer items in the shopping cart.</span><br style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\"><br style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\"><span style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\">Here&nbsp;</span><em style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\">step</em><span style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\">&nbsp;is used, so the state is persistent. That means that even if the server shut down, the state will be recovered. &nbsp;given the parameters&nbsp;</span><em style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\">setTimeouts</em><span style=\"color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);\">&nbsp;will kill the process after 200 seconds. After one hour, if the user has not returned, the state will be erased and the shopping&nbsp; cart will be empty next time.&nbsp;</span><br>"